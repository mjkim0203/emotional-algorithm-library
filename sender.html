<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>MQTT Sender</title>
</head>
<body>
  <h2>ì˜ìƒ URL ì…ë ¥ í›„ ì „ì†¡</h2>
  <input id="videoUrl" type="text" placeholder="https://example.com/video.mp4" />
  <button onclick="publishMessage()">MQTT ë©”ì‹œì§€ ì „ì†¡</button>

  <!-- MQTT ë¼ì´ë¸ŒëŸ¬ë¦¬ (CDN) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/paho-mqtt/1.1.0/paho-mqtt.min.js"></script>
  <script>
    const client = new Paho.MQTT.Client("test.mosquitto.org", 8081, "/mqtt", "sender-" + Math.random());
    const topic = "sample/goldstar/display"; // âœ… playerì™€ ë™ì¼í•œ í† í”½

    client.connect({
      useSSL: true,
      onSuccess: () => {
        console.log("âœ… MQTT ì—°ê²° ì„±ê³µ (SENDER)");
      },
      onFailure: (e) => {
        console.error("âŒ MQTT ì—°ê²° ì‹¤íŒ¨", e);
      }
    });

    function publishMessage() {
      const url = document.getElementById("videoUrl").value.trim();
      if (!url.endsWith(".mp4")) {
        alert("âš ï¸ .mp4 ë§í¬ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”");
        return;
      }

      const msg = new Paho.MQTT.Message(url);
      msg.destinationName = topic;
      client.send(msg);
      console.log("ğŸ“¤ ì „ì†¡ëœ ë©”ì‹œì§€:", url);
    }
  </script>
</body>
</html>
